(this.webpackJsonp=this.webpackJsonp||[]).push([[302],{T5P5:function(t,e,r){"use strict";r.r(e),r.d(e,"initHomePanel",(function(){return C}));r("byxs");var n=r("yWhq"),o=r("ewH8"),a=r("GiFX"),i=r("5v28"),s=r("NmEs"),l=r("4lAS"),c=r("z1xw"),u=r("/lV4"),d=r("1fc5"),p={components:{GlButtonGroup:d.a,GlButton:l.a},directives:{GlTooltip:c.a},inject:{forksCount:{default:0},projectFullPath:{default:""},projectForksUrl:{default:""},userForkUrl:{default:""},newForkUrl:{default:""},canReadCode:{default:!1},canForkProject:{default:!1}},computed:{forkButtonUrl(){return this.userForkUrl||this.newForkUrl},userHasForkAccess(){return Boolean(this.userForkUrl)&&this.canReadCode},userCanFork(){return this.canReadCode&&this.canForkProject},forkButtonEnabled(){return this.userHasForkAccess||this.userCanFork},forkButtonTooltip(){return this.canForkProject?this.userHasForkAccess?Object(u.s__)("ProjectOverview|Go to your fork"):Object(u.s__)("ProjectOverview|Create new fork"):Object(u.s__)("ProjectOverview|You don't have permission to fork this project")}}},f=r("tBpV"),h=Object(f.a)(p,(function(){var t=this,e=t._self._c;return e("gl-button-group",[e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{"data-testid":"fork-button",disabled:!t.forkButtonEnabled,href:t.forkButtonUrl,icon:"fork",title:t.forkButtonTooltip}},[t._v(t._s(t.s__("ProjectOverview|Fork")))]),t._v(" "),e("gl-button",{attrs:{"data-testid":"forks-count",disabled:!t.canReadCode,href:t.projectForksUrl}},[t._v(t._s(t.forksCount))])],1)}),[],!1,null,null,null).exports,m=r("sijA"),g=r("UFYv"),v=r("s1D3"),j=r("puZj"),b=r("FxFN"),y=r("4wgn"),k=r("tnyU"),P=r.n(k),w={name:"StarCount",components:{GlButton:l.a,GlButtonGroup:d.a,GlIcon:v.a},directives:{GlTooltip:c.a},inject:{projectId:{default:null},signInPath:{default:""},starCount:{default:0},starred:{default:!1},starrersPath:{default:""}},data(){return{isLoading:!1,count:this.starCount,isStarred:this.starred}},computed:{starIcon(){return this.isStarred?"star":"star-o"},starText(){return this.isStarred?Object(u.s__)("ProjectOverview|Unstar"):Object(u.s__)("ProjectOverview|Star")},starHref(){return Object(s.C)()?null:this.signInPath},tooltip(){return Object(s.C)()?this.starText:Object(u.s__)("ProjectOverview|You must sign in to star a project")}},methods:{showToastMessage(){const t={text:Object(u.s__)("ProjectOverview|Star toggle failed. Try again later."),variant:"danger"};this.$toast.show(t.text,{variant:t.variant})},async setStarStatus(){if(Object(s.C)())try{var t;const{data:e}=await this.$apollo.mutate({mutation:P.a,variables:{projectId:Object(b.c)(y.E,this.projectId),starred:!this.isStarred}});(null===(t=e.errors)||void 0===t?void 0:t.length)>0?(Object(j.a)(this.$options.name,new Error(e.errors.join(", "))),this.showToastMessage()):(this.count=e.starProject.count,this.isStarred=!this.isStarred)}catch(t){Object(j.a)(this.$options.name,t),this.showToastMessage()}}},modalId:"custom-notifications-modal"},S=Object(f.a)(w,(function(){var t=this,e=t._self._c;return e("gl-button-group",[e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"star-btn",attrs:{size:"medium","data-testid":"star-button",title:t.tooltip,href:t.starHref},on:{click:function(e){return t.setStarStatus()}}},[e("gl-icon",{attrs:{name:t.starIcon,size:16}}),t._v("\n    "+t._s(t.starText)+"\n  ")],1),t._v(" "),e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"star-count",attrs:{"data-testid":"star-count",size:"medium",href:t.starrersPath,title:t.s__("ProjectOverview|Starrers")}},[t._v("\n    "+t._s(t.count)+"\n  ")])],1)}),[],!1,null,null,null).exports,O={components:{ForksButton:h,GlButton:l.a,MoreActionsDropdown:m.a,NotificationsDropdown:g.a,StarCount:S},directives:{GlTooltip:c.a},inject:{adminPath:{default:""},canReadProject:{default:!1},isProjectEmpty:{default:!1},projectId:{default:""}},data:()=>({isLoggedIn:Object(s.C)()}),computed:{canForkProject(){return!this.isProjectEmpty&&Object(s.C)()&&this.canReadProject},copyProjectId(){return Object(u.sprintf)(Object(u.s__)("ProjectPage|Project ID: %{id}"),{id:this.projectId})}},i18n:{adminButtonTooltip:Object(u.__)("View project in admin area")}},T={components:{HomePanelActions:Object(f.a)(O,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"gl-justify-content-md-end project-repo-buttons gl-flex gl-flex-wrap gl-items-center gl-gap-3"},[t.adminPath?e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{"aria-label":t.$options.i18n.adminButtonTooltip,href:t.adminPath,title:t.$options.i18n.adminButtonTooltip,"data-testid":"admin-button",icon:"admin"}}):t._e(),t._v(" "),t.isLoggedIn&&t.canReadProject?[e("notifications-dropdown")]:t._e(),t._v(" "),e("star-count"),t._v(" "),t.canForkProject?e("forks-button"):t._e(),t._v(" "),t.canReadProject?[e("span",{staticClass:"gl-sr-only",attrs:{itemprop:"identifier","data-testid":"project-id-content"}},[t._v("\n      "+t._s(t.copyProjectId)+"\n    ")])]:t._e(),t._v(" "),e("more-actions-dropdown")],2)}),[],!1,null,null,null).exports}},_=Object(f.a)(T,(function(){return(0,this._self._c)("home-panel-actions")}),[],!1,null,null,null).exports;o.default.use(n.a),o.default.use(a.b);const F=new a.b({defaultClient:Object(i.b)()}),C=function(){const t=document.getElementById("js-home-panel");if(null===t)return null;const{adminPath:e,canReadProject:r,isProjectEmpty:n,projectAvatar:a,projectId:i,isGroup:l,leaveConfirmMessage:c,leavePath:u,requestAccessPath:d,withdrawConfirmMessage:p,withdrawPath:f,canEdit:h,editPath:m,canForkProject:g,canReadCode:v,forksCount:j,newForkUrl:b,projectForksUrl:y,projectFullPath:k,userForkUrl:P,emailsDisabled:w,notificationDropdownItems:S,notificationHelpPagePath:O,notificationLevel:T,signInPath:C,starCount:I,starred:$,starrersPath:N,projectName:B,projectVisibilityLevel:x,isProjectArchived:D,isProjectMarkedForDeletion:A,complianceFrameworkBadgeColor:U,complianceFrameworkBadgeName:E,complianceFrameworkBadgeTitle:M,hasComplianceFrameworkFeature:G,cicdCatalogPath:V}=t.dataset;return new o.default({apolloProvider:F,el:t,name:"HomePanelRoot",provide:{adminPath:e,canReadProject:Object(s.J)(r),isProjectEmpty:Object(s.J)(n),projectAvatar:a,projectId:parseInt(i,10),groupOrProjectId:i,isGroup:Object(s.J)(l),leaveConfirmMessage:c,leavePath:u,requestAccessPath:d,withdrawConfirmMessage:p,withdrawPath:f,canEdit:Object(s.J)(h),editPath:m,canForkProject:Object(s.J)(g),canReadCode:Object(s.J)(v),forksCount:parseInt(j,10)||0,newForkUrl:b,projectForksUrl:y,projectFullPath:k,userForkUrl:P,dropdownItems:JSON.parse(S||null),emailsDisabled:Object(s.J)(w),helpPagePath:O,initialNotificationLevel:T,noFlip:!0,signInPath:C,starCount:parseInt(I,10)||0,starred:Object(s.J)($),starrersPath:N,projectName:B,projectVisibilityLevel:x,isProjectArchived:Object(s.J)(D),isProjectMarkedForDeletion:Object(s.J)(A),complianceFrameworkBadgeColor:U,complianceFrameworkBadgeName:E,complianceFrameworkBadgeTitle:M,hasComplianceFrameworkFeature:Object(s.J)(G),cicdCatalogPath:V},render:function(t){return t(_)}})}},onSc:function(t,e,r){"use strict";
/*! 
  * portal-vue © Thorsten Lünborg, 2019 
  * 
  * Version: 2.1.7
  * 
  * LICENCE: MIT 
  * 
  * https://github.com/linusborg/portal-vue
  * 
 */Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=r("ewH8"))&&"object"==typeof n&&"default"in n?n.default:n;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s="undefined"!=typeof window;function l(t,e){return e.reduce((function(e,r){return t.hasOwnProperty(r)&&(e[r]=t[r]),e}),{})}var c={},u={},d={},p=new(o.extend({data:function(){return{transports:c,targets:u,sources:d,trackInstances:s}},methods:{open:function(t){if(s){var e=t.to,r=t.from,n=t.passengers,i=t.order,l=void 0===i?1/0:i;if(e&&r&&n){var c,u={to:e,from:r,passengers:(c=n,Array.isArray(c)||"object"===a(c)?Object.freeze(c):c),order:l};-1===Object.keys(this.transports).indexOf(e)&&o.set(this.transports,e,[]);var d,p=this.$_getTransportIndex(u),f=this.transports[e].slice(0);-1===p?f.push(u):f[p]=u,this.transports[e]=(d=function(t,e){return t.order-e.order},f.map((function(t,e){return[e,t]})).sort((function(t,e){return d(t[1],e[1])||t[0]-e[0]})).map((function(t){return t[1]})))}}},close:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.to,n=t.from;if(r&&(n||!1!==e)&&this.transports[r])if(e)this.transports[r]=[];else{var o=this.$_getTransportIndex(t);if(o>=0){var a=this.transports[r].slice(0);a.splice(o,1),this.transports[r]=a}}},registerTarget:function(t,e,r){s&&(this.trackInstances&&!r&&this.targets[t]&&console.warn("[portal-vue]: Target ".concat(t," already exists")),this.$set(this.targets,t,Object.freeze([e])))},unregisterTarget:function(t){this.$delete(this.targets,t)},registerSource:function(t,e,r){s&&(this.trackInstances&&!r&&this.sources[t]&&console.warn("[portal-vue]: source ".concat(t," already exists")),this.$set(this.sources,t,Object.freeze([e])))},unregisterSource:function(t){this.$delete(this.sources,t)},hasTarget:function(t){return!(!this.targets[t]||!this.targets[t][0])},hasSource:function(t){return!(!this.sources[t]||!this.sources[t][0])},hasContentFor:function(t){return!!this.transports[t]&&!!this.transports[t].length},$_getTransportIndex:function(t){var e=t.to,r=t.from;for(var n in this.transports[e])if(this.transports[e][n].from===r)return+n;return-1}}}))(c),f=1,h=o.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(f++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var t=this;this.$nextTick((function(){p.registerSource(t.name,t)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){p.unregisterSource(this.name),this.clear()},watch:{to:function(t,e){e&&e!==t&&this.clear(e),this.sendUpdate()}},methods:{clear:function(t){var e={from:this.name,to:t||this.to};p.close(e)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(t){return"function"==typeof t?t(this.slotProps):t},sendUpdate:function(){var t=this.normalizeSlots();if(t){var e={from:this.name,to:this.to,passengers:i(t),order:this.order};p.open(e)}else this.clear()}},render:function(t){var e=this.$slots.default||this.$scopedSlots.default||[],r=this.tag;return e&&this.disabled?e.length<=1&&this.slim?this.normalizeOwnChildren(e)[0]:t(r,[this.normalizeOwnChildren(e)]):this.slim?t():t(r,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),m=o.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:p.transports,firstRender:!0}},created:function(){var t=this;this.$nextTick((function(){p.registerTarget(t.name,t)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(t,e){p.unregisterTarget(e),p.registerTarget(t,this)}},mounted:function(){var t=this;this.transition&&this.$nextTick((function(){t.firstRender=!1}))},beforeDestroy:function(){p.unregisterTarget(this.name)},computed:{ownTransports:function(){var t=this.transports[this.name]||[];return this.multiple?t:0===t.length?[]:[t[t.length-1]]},passengers:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.reduce((function(t,r){var n=r.passengers[0],o="function"==typeof n?n(e):r.passengers;return t.concat(o)}),[])}(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var t=this.slim&&!this.transition;return t&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),t}},render:function(t){var e=this.noWrapper(),r=this.children(),n=this.transition||this.tag;return e?r[0]:this.slim&&!n?t():t(n,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},r)}}),g=0,v=["disabled","name","order","slim","slotProps","tag","to"],j=["multiple","transition"],b=o.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(g++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!=typeof document){var t=document.querySelector(this.mountTo);if(t){var e=this.$props;if(p.targets[e.name])e.bail?console.warn("[portal-vue]: Target ".concat(e.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=p.targets[e.name];else{var r=e.append;if(r){var n="string"==typeof r?r:"DIV",o=document.createElement(n);t.appendChild(o),t=o}var a=l(this.$props,j);a.slim=this.targetSlim,a.tag=this.targetTag,a.slotProps=this.targetSlotProps,a.name=this.to,this.portalTarget=new m({el:t,parent:this.$parent||this,propsData:a})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var t=this.portalTarget;if(this.append){var e=t.$el;e.parentNode.removeChild(e)}t.$destroy()},render:function(t){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),t();if(!this.$scopedSlots.manual){var e=l(this.$props,v);return t(h,{props:e,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var r=this.$scopedSlots.manual({to:this.to});return Array.isArray(r)&&(r=r[0]),r||t()}});var y={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.portalName||"Portal",h),t.component(e.portalTargetName||"PortalTarget",m),t.component(e.MountingPortalName||"MountingPortal",b)}};e.default=y,e.Portal=h,e.PortalTarget=m,e.MountingPortal=b,e.Wormhole=p},puZj:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("7F3p");const o=function(t,e){n.b(e,{tags:{component:t}})}},tnyU:function(t,e){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"setStarStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProjectID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"starred"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"starProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectId"},value:{kind:"Variable",name:{kind:"Name",value:"projectId"}}},{kind:"ObjectField",name:{kind:"Name",value:"starred"},value:{kind:"Variable",name:{kind:"Name",value:"starred"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:154}};r.loc.source={body:"mutation setStarStatus($projectId: ProjectID!, $starred: Boolean!) {\n  starProject(input: { projectId: $projectId, starred: $starred }) {\n    count\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function o(t,e){for(var r=0;r<t.definitions.length;r++){var n=t.definitions[r];if(n.name&&n.name.value==e)return n}}r.definitions.forEach((function(t){if(t.name){var e=new Set;!function t(e,r){if("FragmentSpread"===e.kind)r.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&r.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,r)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,r)})),e.definitions&&e.definitions.forEach((function(e){t(e,r)}))}(t,e),n[t.name.value]=e}})),t.exports=r,t.exports.setStarStatus=function(t,e){var r={kind:t.kind,definitions:[o(t,e)]};t.hasOwnProperty("loc")&&(r.loc=t.loc);var a=n[e]||new Set,i=new Set,s=new Set;for(a.forEach((function(t){s.add(t)}));s.size>0;){var l=s;s=new Set,l.forEach((function(t){i.has(t)||(i.add(t),(n[t]||new Set).forEach((function(t){s.add(t)})))}))}return i.forEach((function(e){var n=o(t,e);n&&r.definitions.push(n)})),r}(r,"setStarStatus")}}]);
//# sourceMappingURL=commons-pages.projects.home_panel-pages.projects.show.f6405c34.chunk.js.map